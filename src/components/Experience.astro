---
interface Job {
  company: string;
  role: string;
  period: string;
  description: string;
  tags: string[];
}

interface Props {
  t: Record<string, string>;
  jobs: Job[];
}

const { t, jobs } = Astro.props;
---

<section id="experience" class="container section">
  <h2 class="section-title mono"><span class="number">02.</span> {t['experience.title']}</h2>

  <div class="experience-list">
      {jobs.map(job => (
          <div class="job-item">
              <div class="job-header">
                  <h3 class="job-role">{job.role} <span class="at-symbol">@</span> <span class="company">{job.company}</span></h3>
                  <span class="job-period mono">{job.period}</span>
              </div>
              <p class="job-description">{job.description}</p>
              <ul class="job-tech">
                  {job.tags.map(tag => <li>{tag}</li>)}
              </ul>
          </div>
      ))}
  </div>
</section>

<style>
  .section-title {
    font-size: 1.5rem;
    color: var(--text-primary);
    margin-bottom: 2.5rem;
    display: flex;
    align-items: center;
  }
  
  .section-title::after {
    content: "";
    flex: 1;
    height: 1px;
    background: var(--bg-card-hover);
    margin-left: 1.5rem;
    max-width: 300px;
  }

  .number {
    color: var(--primary);
    margin-right: 0.5rem;
    font-size: 1.25rem;
  }

  .experience-list {
      max-width: 700px;
      margin: 0 auto 0 0; /* Left align but contained */
      display: flex;
      flex-direction: column;
      gap: 2rem;
      border-left: 2px solid var(--bg-card-hover);
      padding-left: 2rem;
      position: relative;
  }

  .job-item {
      position: relative;
  }

  .job-item::before {
      content: "";
      position: absolute;
      left: -2.4rem; /* Align with border */
      top: 5px;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: var(--bg-card-hover);
      border: 2px solid var(--bg-dark);
      transition: background 0.3s;
  }

  .job-item:hover::before {
      background: var(--primary);
  }

  .job-header {
      margin-bottom: 0.5rem;
  }

  .job-role {
      font-size: 1.25rem;
      font-weight: 500;
      color: var(--text-primary);
  }

  .at-symbol {
      color: var(--primary);
  }

  .company {
      color: var(--primary);
  }

  .job-period {
      font-size: 0.875rem;
      color: var(--text-secondary);
      display: block;
      margin-top: 0.25rem;
  }

  .job-description {
      color: var(--text-secondary);
      margin-bottom: 1rem;
      max-width: 500px;
  }

  .job-tech {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      list-style: none;
      font-family: 'Fira Code', monospace;
      font-size: 0.8rem;
      color: var(--text-secondary);
  }

  .job-tech li::before {
      content: "â–¹";
      color: var(--primary);
      margin-right: 5px;
  }
</style>
